{"version":3,"file":"Communication.js","sourceRoot":"","sources":["../../src/editors/Communication.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,GAAG,EAAE,IAAI,EAAc,QAAQ,EAAE,MAAM,aAAa,CAAC;AAC9D,OAAO,EAAE,GAAG,EAAE,MAAM,mBAAmB,CAAC;AAExC,OAAO,mBAAmB,CAAC;AAE3B,OAAO,sCAAsC,CAAC;AAC9C,OAAO,iCAAiC,CAAC;AAEzC,OAAO,EACL,cAAc,EAEd,QAAQ,EACT,MAAM,qCAAqC,CAAC;AAC7C,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAC7C,OAAO,EAAE,cAAc,EAAE,MAAM,+CAA+C,CAAC;AAE/E,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAClE,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAE5D,sEAAsE;AACtE,MAAqB,mBAAoB,SAAQ,iBAAiB;IAAlE;;QAKE,cAAS,GAAG,CAAC,CAAC,CAAC;IA+FjB,CAAC;IA7FC;;;OAGG;IACK,mBAAmB;QACzB,MAAM,OAAO,GAAY,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,eAAe,EAAE,EAAE,CAAC,CAAC;QACtE,IAAI,CAAC,aAAa,CAChB,cAAc,CAAC;YACb,GAAG,EAAE;gBACH,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe;gBAChC,OAAO,EAAE,OAAO;aACjB;SACF,CAAC,CACH,CAAC;QACF,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,0EAA0E;IAClE,0BAA0B;QAChC,MAAM,MAAM,GACV,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,uBAAuB,CAAC;YAC/C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE7B,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,aAAa,CAAC,mCAAmC,CAAC;YAC/D,OAAO,IAAI,CAAA;4CAC2B,GAAG,CAAC,uBAAuB,CAAC;;;;mBAIrD,GAAG,CAAC,6BAA6B,CAAC;mBAClC,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,EAAE;;;QAGlD,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC;QAEhC,OAAO,IAAI,CAAA;;;iBAGE,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,EAAE;;;UAG9C,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aACxD,MAAM,CAAC,QAAQ,CAAC;aAChB,GAAG,CACF,UAAU,CAAC,EAAE,CACX,IAAI,CAAA;6BACW,IAAI,CAAC,SAAS;uBACpB,IAAI,CAAC,GAAG;2BACJ,UAAU;oCACD,CACzB;;QAEH,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC;IAClC,CAAC;;AAEM,0BAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAgClB,AAhCY,CAgCX;eAnGiB,mBAAmB;AAGtC;IADC,QAAQ,EAAE;gDACO;AAElB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sDACZ","sourcesContent":["import type { TemplateResult } from 'lit-element';\nimport { css, html, LitElement, property } from 'lit-element';\nimport { get } from '../translation.js';\n\nimport '@material/mwc-fab';\n\nimport './communication/subnetwork-editor.js';\nimport './ied/access-point-container.js';\n\nimport {\n  newWizardEvent,\n  WizardEvent,\n  isPublic\n} from '@openscd/open-scd/src/foundation.js';\nimport { createElement } from '@openscd/xml';\nimport { newActionEvent } from '@openscd/core/foundation/deprecated/editor.js';\nimport { wizards } from '../wizards/wizard-library.js';\nimport { createSubNetworkWizard } from '../wizards/subnetwork.js';\nimport { DirectDialogMixin } from '../directDialogMixin.js';\n\n/** An editor [[`plugin`]] for editing the `Communication` section. */\nexport default class CommunicationPlugin extends DirectDialogMixin {\n  /** The document being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property()\n  doc!: XMLDocument;\n  @property({ type: Number })\n  editCount = -1;\n\n  /**\n   * Creates the Communication Element and returns the created Element\n   * @returns {Element} Communication `Element`\n   */\n  private createCommunication(): Element {\n    const element: Element = createElement(this.doc, 'Communication', {});\n    this.dispatchEvent(\n      newActionEvent({\n        new: {\n          parent: this.doc.documentElement,\n          element: element,\n        },\n      })\n    );\n    return element;\n  }\n\n  /** Opens a [[`WizardDialog`]] for creating a new `SubNetwork` element. */\n  private openCreateSubNetworkWizard(): void {\n    const parent =\n      this.doc.querySelector(':root > Communication') ||\n      this.createCommunication();\n\n    this.dispatchEvent(newWizardEvent(createSubNetworkWizard(parent)));\n  }\n\n  render(): TemplateResult {\n    if (!this.doc?.querySelector(':root > Communication >SubNetwork'))\n      return html`<h1>\n        <span style=\"color: var(--base1)\">${get('communication.missing')}</span\n        ><mwc-fab\n          extended\n          icon=\"add\"\n          label=\"${get('subnetwork.wizard.title.add')}\"\n          @click=${() => this.openCreateSubNetworkWizard()}\n        ></mwc-fab>\n      </h1>\n      ${this.renderWizardDialog()}`;\n\n    return html`<mwc-fab\n        extended\n        icon=\"add\"\n        label=\"${get('subnetwork.wizard.title.add')}\"\n        @click=${() => this.openCreateSubNetworkWizard()}\n      ></mwc-fab>\n      <section>\n        ${Array.from(this.doc.querySelectorAll('SubNetwork') ?? [])\n          .filter(isPublic)\n          .map(\n            subnetwork =>\n              html`<subnetwork-editor\n                .editCount=${this.editCount}\n                .doc=${this.doc}\n                .element=${subnetwork}\n              ></subnetwork-editor>`\n          )}\n      </section>\n      ${this.renderWizardDialog()}`;\n  }\n\n  static styles = css`\n    :host {\n      width: 100vw;\n    }\n\n    h1 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      margin: 0px;\n      line-height: 48px;\n      padding-left: 0.3em;\n      transition: background-color 150ms linear;\n    }\n\n    section {\n      outline: none;\n      padding: 8px 12px 16px;\n    }\n\n    subnetwork-editor {\n      margin: 8px 12px 16px;\n    }\n\n    mwc-fab {\n      position: fixed;\n      bottom: 32px;\n      right: 32px;\n    }\n  `;\n}\n"]}